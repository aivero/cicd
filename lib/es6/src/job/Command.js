// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Profile from "../Profile.js";
import * as Dict$Std from "@prefix_re/std/lib/es6/src/Dict.js";
import * as Task$Std from "@prefix_re/std/lib/es6/src/Task.js";
import * as Array$Std from "@prefix_re/std/lib/es6/src/Array.js";

function getJobs(ints) {
  return Task$Std.to(Array$Std.flatMap(Array$Std.filter(ints, (function ($$int) {
                        return $$int.mode === "command";
                      })), (function (param) {
                    var cache = param.cache;
                    var image = param.image;
                    var script = param.script;
                    var profiles = param.profiles;
                    var needs = param.needs;
                    var folder = param.folder;
                    var version = param.version;
                    var name = param.name;
                    return Array$Std.concat(Array$Std.map(profiles, (function (profile) {
                                      return Dict$Std.to(name + "/" + version + "-" + profile, {
                                                  extends: undefined,
                                                  variables: undefined,
                                                  image: Profile.getImage(profile, image),
                                                  tags: undefined,
                                                  script: Array$Std.concat(["cd " + folder], script),
                                                  needs: Array$Std.uniq(needs),
                                                  services: undefined,
                                                  cache: cache
                                                });
                                    })), [Dict$Std.to(name + "/" + version, {
                                      extends: undefined,
                                      variables: undefined,
                                      image: undefined,
                                      tags: undefined,
                                      script: ["echo"],
                                      needs: Array$Std.map(profiles, (function (profile) {
                                              return name + "/" + version + "-" + profile;
                                            })),
                                      services: undefined,
                                      cache: undefined
                                    })]);
                  })));
}

export {
  getJobs ,
  
}
/* No side effect */
