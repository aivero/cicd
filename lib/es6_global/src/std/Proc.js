// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Int from "./Int.js";
import * as Task from "./Task.js";
import * as $$Array from "./Array.js";
import * as Console from "./Console.js";

function run(cmd) {
  Console.log("Running command: " + $$Array.join(cmd, " "));
  var proc = Deno.run({
        cmd: cmd,
        stdout: "piped",
        stderr: "piped"
      });
  var status = proc.status();
  var output = proc.output();
  var stderrOutput = proc.stderrOutput();
  return Task.map(Promise.all([
                  status,
                  output,
                  stderrOutput
                ]), (function (param) {
                var code = param[0].code;
                var decoder = new TextDecoder();
                var output = decoder.decode(param[1]);
                var errOutput = decoder.decode(param[2]);
                if (code === 0) {
                  return {
                          TAG: /* Ok */0,
                          _0: output
                        };
                } else {
                  return {
                          TAG: /* Error */1,
                          _0: errOutput + " (Exit code: " + Int.toString(code) + ")"
                        };
                }
              }));
}

export {
  run ,
  
}
/* No side effect */
